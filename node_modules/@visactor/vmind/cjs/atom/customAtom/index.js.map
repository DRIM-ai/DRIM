{"version":3,"sources":["../src/atom/customAtom/index.ts"],"names":[],"mappings":";;;AAAA,2CAA4C;AAE5C,kCAAmC;AAEnC,gDAA6C;AAG7C,MAAa,YAAa,SAAQ,eAAkC;IAKlE,YAAY,OAAY,EAAE,MAA2B;QACnD,KAAK,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QALzB,SAAI,GAAG,eAAQ,CAAC,aAAa,CAAC;QAE9B,cAAS,GAAG,IAAI,CAAC;IAIjB,CAAC;IAED,cAAc,CAAC,KAAc;QAC3B,MAAM,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;QAC9B,OAAO;YACL;gBACE,IAAI,EAAE,QAAQ;gBACd,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,cAAc;aACrC;YACD,GAAG,CAAC,IAAI,CAAC,SAAS,IAAI,EAAE,CAAC;YACzB;gBACE,IAAI,EAAE,MAAM;gBACZ,OAAO,EAAE,KAAK,IAAI,IAAI;aACvB;SACF,CAAC;IACJ,CAAC;IAED,eAAe,CAAC,OAAY,EAAE,QAAc;QAC1C,qDACK,IAAI,CAAC,OAAO,GACZ,OAAO,KACV,OAAO,EAAE,QAAQ,IACjB;IACJ,CAAC;CACF;AA/BD,oCA+BC;AAEM,MAAM,wBAAwB,GAAG,GAAG,EAAE;IAC3C,iBAAO,CAAC,YAAY,CAClB,eAAQ,CAAC,aAAa,EACtB,YAAwE,CACzE,CAAC;AACJ,CAAC,CAAC;AALW,QAAA,wBAAwB,4BAKnC","file":"index.js","sourcesContent":["import { AtomName } from '../../types/atom';\nimport type { CustomPromptOptions } from '../../types';\nimport { BaseAtom } from '../base';\nimport type { LLMMessage } from '../../types/llm';\nimport { Factory } from '../../core/factory';\nimport type { BaseAtomConstructor } from '../../types';\n\nexport class CustomPrompt extends BaseAtom<any, CustomPromptOptions> {\n  name = AtomName.CUSTOM_PROMPT;\n\n  isLLMAtom = true;\n\n  constructor(context: any, option: CustomPromptOptions) {\n    super(context, option);\n  }\n\n  getLLMMessages(query?: string): LLMMessage[] {\n    const { text } = this.context;\n    return [\n      {\n        role: 'system',\n        content: this.options.promptTemplate\n      },\n      ...(this.responses || []),\n      {\n        role: 'user',\n        content: query || text\n      }\n    ];\n  }\n\n  parseLLMContent(resJson: any, toolJson?: any): any {\n    return {\n      ...this.context,\n      ...resJson,\n      toolRes: toolJson\n    };\n  }\n}\n\nexport const registerCustomPromptAtom = () => {\n  Factory.registerAtom(\n    AtomName.CUSTOM_PROMPT,\n    CustomPrompt as unknown as BaseAtomConstructor<any, CustomPromptOptions>\n  );\n};\n"]}